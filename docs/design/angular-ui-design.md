# Angular UI設計

## 概要

Phase 4 Angular統合のUI設計書。7画面で構成し、シンプルなUIを採用。

## 画面一覧

| No. | 画面名 | パス | 認証 | 権限 | 概要 |
|-----|--------|------|------|------|------|
| 1 | ログイン | `/login` | 不要 | - | ログイン・ユーザー登録 |
| 2 | ダッシュボード | `/dashboard` | 必須 | - | サマリー・直近タスク表示 |
| 3 | プロジェクト一覧 | `/projects` | 必須 | - | プロジェクトCRUD |
| 4 | タスク一覧 | `/tasks` | 必須 | - | タスクCRUD・フィルター |
| 5 | プロフィール | `/profile` | 必須 | - | ユーザー情報編集 |
| 6 | ユーザー管理 | `/admin/users` | 必須 | ADMIN | ユーザー一覧・ステータス変更 |
| 7 | ロール管理 | `/admin/roles` | 必須 | ADMIN | ロールCRUD |

---

## 画面遷移図

```
                    ┌─────────────────────────────────────────┐
                    │              未認証状態                  │
                    └─────────────────┬───────────────────────┘
                                      │
                                      v
                              ┌───────────────┐
                              │    /login     │
                              │  ログイン画面  │
                              └───────┬───────┘
                                      │ 認証成功
                                      v
┌─────────────────────────────────────────────────────────────────────────────┐
│                              認証済み状態                                    │
│                                                                             │
│   ┌────────────┐     ┌────────────┐     ┌────────────┐     ┌────────────┐  │
│   │ /dashboard │ ←→  │ /projects  │ ←→  │  /tasks    │ ←→  │  /profile  │  │
│   │ダッシュボード│     │プロジェクト │     │  タスク    │     │プロフィール │  │
│   └────────────┘     └────────────┘     └────────────┘     └────────────┘  │
│         ↑                                                                   │
│         │ (ADMIN権限)                                                       │
│         v                                                                   │
│   ┌─────────────────────────────────────┐                                  │
│   │          ADMIN専用エリア             │                                  │
│   │  ┌──────────────┐  ┌──────────────┐ │                                  │
│   │  │/admin/users  │  │/admin/roles  │ │                                  │
│   │  │ユーザー管理   │  │ ロール管理   │ │                                  │
│   │  └──────────────┘  └──────────────┘ │                                  │
│   └─────────────────────────────────────┘                                  │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 共通レイアウト

### ヘッダー

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  [Logo] Task Manager     Dashboard | Projects | Tasks      [User ▼] Logout  │
│                                                            (ADMIN: Admin ▼) │
└─────────────────────────────────────────────────────────────────────────────┘
```

**要素**:
- ロゴ（クリックでダッシュボードへ）
- ナビゲーション: Dashboard, Projects, Tasks
- ユーザーメニュー: プロフィール、ログアウト
- ADMINメニュー（ADMIN権限のみ）: Users, Roles

### ローディング

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│                              ⟳ Loading...                                   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### トースト通知

```
                                                      ┌──────────────────────┐
                                                      │ ✓ 保存しました       │
                                                      │ ✗ エラーが発生しました │
                                                      └──────────────────────┘
```

---

## 1. ログイン画面 `/login`

### ワイヤーフレーム

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│                         ┌─────────────────────────┐                         │
│                         │      Task Manager       │                         │
│                         │                         │                         │
│                         │  ┌─────────┬─────────┐  │                         │
│                         │  │ ログイン │ 新規登録 │  │ ← タブ切替             │
│                         │  └─────────┴─────────┘  │                         │
│                         │                         │                         │
│                         │  ┌─────────────────┐    │                         │
│                         │  │ Email           │    │                         │
│                         │  └─────────────────┘    │                         │
│                         │                         │                         │
│                         │  ┌─────────────────┐    │                         │
│                         │  │ Password        │    │                         │
│                         │  └─────────────────┘    │                         │
│                         │                         │                         │
│                         │  (新規登録時のみ)       │                         │
│                         │  ┌─────────────────┐    │                         │
│                         │  │ Display Name    │    │                         │
│                         │  └─────────────────┘    │                         │
│                         │                         │                         │
│                         │  ┌─────────────────┐    │                         │
│                         │  │    ログイン     │    │ ← ボタン                │
│                         │  └─────────────────┘    │                         │
│                         │                         │                         │
│                         │  [エラーメッセージ]     │                         │
│                         │                         │                         │
│                         └─────────────────────────┘                         │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 画面仕様

| 項目 | 内容 |
|------|------|
| タブ | ログイン / 新規登録 の切替 |
| フォーム（共通） | Email, Password |
| フォーム（新規登録時） | Display Name |
| バリデーション | 必須、Email形式、パスワード最小8文字 |
| エラー表示 | フォーム下部に赤字で表示 |
| 成功時 | `/dashboard` へリダイレクト |

### 呼び出すAPI

| 操作 | API | 備考 |
|------|-----|------|
| ログイン | `POST /api/auth/login` | `{ email, password }` |
| 新規登録 | `POST /api/auth/register` | `{ email, password, displayName }` |

---

## 2. ダッシュボード画面 `/dashboard`

### ワイヤーフレーム

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  [Header]                                                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ようこそ、{displayName} さん                                               │
│                                                                             │
│  ┌─────────────────────────────┐  ┌─────────────────────────────┐          │
│  │     タスクサマリー           │  │   プロジェクトサマリー       │          │
│  │                             │  │                             │          │
│  │  TODO:        [12]          │  │  総数:        [5]           │          │
│  │  IN_PROGRESS: [5]           │  │  所有:        [3]           │          │
│  │  DONE:        [28]          │  │                             │          │
│  │                             │  │                             │          │
│  └─────────────────────────────┘  └─────────────────────────────┘          │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐  │
│  │ 直近のタスク                                                          │  │
│  ├───────────────────────────────────────────────────────────────────────┤  │
│  │ タイトル          │ プロジェクト   │ ステータス │ 優先度 │ 期限       │  │
│  ├───────────────────────────────────────────────────────────────────────┤  │
│  │ 機能Aの実装       │ プロジェクト1  │ TODO       │ HIGH   │ 2025-01-20 │  │
│  │ バグ修正          │ プロジェクト2  │ IN_PROGRESS│ MEDIUM │ 2025-01-18 │  │
│  │ ドキュメント作成  │ プロジェクト1  │ TODO       │ LOW    │ 2025-01-25 │  │
│  │ ...               │                │            │        │            │  │
│  └───────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│  (部分失敗時)                                                               │
│  ⚠ 一部のデータを取得できませんでした: user-service unavailable            │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 画面仕様

| 項目 | 内容 |
|------|------|
| ユーザー情報 | displayName表示 |
| タスクサマリー | TODO/IN_PROGRESS/DONE件数 |
| プロジェクトサマリー | 総数/所有数 |
| 直近タスク | 最大5件、期限順 |
| 部分失敗 | `_errors`がある場合、警告表示 |

### 呼び出すAPI

| 操作 | API | 備考 |
|------|-----|------|
| ダッシュボード取得 | `GET /api/dashboard` | BFFデータ集約 |

---

## 3. プロジェクト一覧画面 `/projects`

### ワイヤーフレーム

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  [Header]                                                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  プロジェクト一覧                           [+ 新規作成]                    │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐  │
│  │ 名前             │ 説明                  │ 作成日     │ 操作          │  │
│  ├───────────────────────────────────────────────────────────────────────┤  │
│  │ プロジェクト1    │ 概要テキスト...       │ 2025-01-10 │ [編集][削除]  │  │
│  │ プロジェクト2    │ 概要テキスト...       │ 2025-01-08 │ [編集][削除]  │  │
│  │ プロジェクト3    │ 概要テキスト...       │ 2025-01-05 │ [編集][削除]  │  │
│  │ ...              │                       │            │               │  │
│  └───────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐  │
│  │ ← 前へ   ページ 1 / 5   次へ →                                        │  │
│  └───────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘

【新規作成/編集ダイアログ】
┌─────────────────────────────────────────────┐
│ プロジェクト作成                      [×]   │
├─────────────────────────────────────────────┤
│                                             │
│  名前 *                                     │
│  ┌───────────────────────────────────────┐  │
│  │                                       │  │
│  └───────────────────────────────────────┘  │
│                                             │
│  説明                                       │
│  ┌───────────────────────────────────────┐  │
│  │                                       │  │
│  │                                       │  │
│  └───────────────────────────────────────┘  │
│                                             │
│  ┌──────────┐  ┌──────────┐                 │
│  │ キャンセル │  │   保存   │                 │
│  └──────────┘  └──────────┘                 │
│                                             │
└─────────────────────────────────────────────┘
```

### 画面仕様

| 項目 | 内容 |
|------|------|
| 一覧表示 | 名前、説明（切り詰め）、作成日、操作ボタン |
| ページネーション | 20件/ページ |
| 新規作成 | ダイアログで入力 |
| 編集 | ダイアログで入力 |
| 削除 | 確認ダイアログ後に実行 |

### 呼び出すAPI

| 操作 | API | 備考 |
|------|-----|------|
| 一覧取得 | `GET /api/projects?page=1&limit=20` | ページネーション |
| 作成 | `POST /api/projects` | `{ name, description }` |
| 更新 | `PATCH /api/projects/:id` | `{ name, description }` |
| 削除 | `DELETE /api/projects/:id` | |

---

## 4. タスク一覧画面 `/tasks`

### ワイヤーフレーム

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  [Header]                                                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  タスク一覧                                 [+ 新規作成]                    │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ フィルター:                                                          │    │
│  │ プロジェクト: [全て      ▼]  ステータス: [全て      ▼]              │    │
│  │ 優先度:       [全て      ▼]  ソート:     [期限 昇順 ▼]              │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐  │
│  │ タイトル      │ プロジェクト │ ステータス │ 優先度 │ 期限   │ 操作    │  │
│  ├───────────────────────────────────────────────────────────────────────┤  │
│  │ 機能Aの実装   │ PJ1          │ [TODO ▼]   │ HIGH   │ 01-20  │ [編][削]│  │
│  │ バグ修正      │ PJ2          │ [PROG ▼]   │ MEDIUM │ 01-18  │ [編][削]│  │
│  │ ドキュメント  │ PJ1          │ [TODO ▼]   │ LOW    │ 01-25  │ [編][削]│  │
│  │ ...           │              │            │        │        │         │  │
│  └───────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│  ← 前へ   ページ 1 / 10   次へ →                                           │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘

【新規作成/編集ダイアログ】
┌─────────────────────────────────────────────┐
│ タスク作成                            [×]   │
├─────────────────────────────────────────────┤
│                                             │
│  タイトル *                                 │
│  ┌───────────────────────────────────────┐  │
│  │                                       │  │
│  └───────────────────────────────────────┘  │
│                                             │
│  説明                                       │
│  ┌───────────────────────────────────────┐  │
│  │                                       │  │
│  └───────────────────────────────────────┘  │
│                                             │
│  プロジェクト *   ┌─────────────────────┐   │
│                   │ 選択してください ▼  │   │
│                   └─────────────────────┘   │
│                                             │
│  ステータス       ┌─────────────────────┐   │
│                   │ TODO             ▼  │   │
│                   └─────────────────────┘   │
│                                             │
│  優先度           ┌─────────────────────┐   │
│                   │ MEDIUM           ▼  │   │
│                   └─────────────────────┘   │
│                                             │
│  期限             ┌─────────────────────┐   │
│                   │ 2025-01-20          │   │
│                   └─────────────────────┘   │
│                                             │
│  ┌──────────┐  ┌──────────┐                 │
│  │ キャンセル │  │   保存   │                 │
│  └──────────┘  └──────────┘                 │
│                                             │
└─────────────────────────────────────────────┘
```

### 画面仕様

| 項目 | 内容 |
|------|------|
| フィルター | プロジェクト、ステータス、優先度 |
| ソート | 期限（昇順/降順）、作成日（昇順/降順） |
| インラインステータス変更 | 一覧上でドロップダウンから変更可能 |
| ページネーション | 20件/ページ |
| 新規作成/編集 | ダイアログ |
| 削除 | 確認ダイアログ |

### 呼び出すAPI

| 操作 | API | 備考 |
|------|-----|------|
| 一覧取得 | `GET /api/tasks?page=1&limit=20&status=TODO&projectId=1` | フィルター対応 |
| 作成 | `POST /api/tasks` | `{ title, description, projectId, status, priority, dueDate }` |
| 更新 | `PATCH /api/tasks/:id` | 部分更新 |
| ステータス変更 | `PATCH /api/tasks/:id` | `{ status }` |
| 削除 | `DELETE /api/tasks/:id` | |

---

## 5. プロフィール画面 `/profile`

### ワイヤーフレーム

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  [Header]                                                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  プロフィール                                                               │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐  │
│  │                                                                       │  │
│  │    ┌─────┐                                                            │  │
│  │    │ 👤  │  {displayName}                                            │  │
│  │    └─────┘  {email}                                                   │  │
│  │             ロール: MEMBER, ADMIN                                     │  │
│  │                                                                       │  │
│  └───────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐  │
│  │ プロフィール編集                                                      │  │
│  ├───────────────────────────────────────────────────────────────────────┤  │
│  │                                                                       │  │
│  │  表示名                                                               │  │
│  │  ┌─────────────────────────────────────────────────────────────────┐  │  │
│  │  │ 現在の表示名                                                    │  │  │
│  │  └─────────────────────────────────────────────────────────────────┘  │  │
│  │                                                                       │  │
│  │  自己紹介                                                             │  │
│  │  ┌─────────────────────────────────────────────────────────────────┐  │  │
│  │  │                                                                 │  │  │
│  │  │                                                                 │  │  │
│  │  └─────────────────────────────────────────────────────────────────┘  │  │
│  │                                                                       │  │
│  │  ┌──────────┐                                                         │  │
│  │  │   保存   │                                                         │  │
│  │  └──────────┘                                                         │  │
│  │                                                                       │  │
│  └───────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐  │
│  │ パスワード変更                                              [変更]   │  │
│  └───────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘

【パスワード変更ダイアログ】
┌─────────────────────────────────────────────┐
│ パスワード変更                        [×]   │
├─────────────────────────────────────────────┤
│                                             │
│  現在のパスワード *                         │
│  ┌───────────────────────────────────────┐  │
│  │ ••••••••                              │  │
│  └───────────────────────────────────────┘  │
│                                             │
│  新しいパスワード *                         │
│  ┌───────────────────────────────────────┐  │
│  │ ••••••••                              │  │
│  └───────────────────────────────────────┘  │
│                                             │
│  新しいパスワード（確認） *                 │
│  ┌───────────────────────────────────────┐  │
│  │ ••••••••                              │  │
│  └───────────────────────────────────────┘  │
│                                             │
│  ┌──────────┐  ┌──────────┐                 │
│  │ キャンセル │  │   変更   │                 │
│  └──────────┘  └──────────┘                 │
│                                             │
└─────────────────────────────────────────────┘
```

### 画面仕様

| 項目 | 内容 |
|------|------|
| ユーザー情報表示 | アバター、displayName、email、ロール |
| プロフィール編集 | 表示名、自己紹介 |
| パスワード変更 | ダイアログで現在PW、新PW、確認PW入力 |

### 呼び出すAPI

| 操作 | API | 備考 |
|------|-----|------|
| ユーザー情報取得 | `GET /api/auth/me` | |
| プロフィール更新 | `PATCH /api/users/:id/profile` | `{ displayName, bio }` |
| パスワード変更 | `PATCH /api/users/:id/password` | `{ currentPassword, newPassword }` |

---

## 6. ユーザー管理画面 `/admin/users`（ADMIN専用）

### ワイヤーフレーム

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  [Header]                                                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ユーザー管理                                                               │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐  │
│  │ Email           │ 表示名      │ ロール        │ 状態   │ 操作        │  │
│  ├───────────────────────────────────────────────────────────────────────┤  │
│  │ admin@test.com  │ 管理者      │ ADMIN, MEMBER │ 有効   │ [ロール][状態]│  │
│  │ user1@test.com  │ ユーザー1   │ MEMBER        │ 有効   │ [ロール][状態]│  │
│  │ user2@test.com  │ ユーザー2   │ MEMBER        │ 無効   │ [ロール][状態]│  │
│  │ ...             │             │               │        │              │  │
│  └───────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│  ← 前へ   ページ 1 / 3   次へ →                                            │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘

【ロール編集ダイアログ】
┌─────────────────────────────────────────────┐
│ ロール編集: user1@test.com            [×]   │
├─────────────────────────────────────────────┤
│                                             │
│  ☑ MEMBER                                   │
│  ☐ ADMIN                                    │
│                                             │
│  ┌──────────┐  ┌──────────┐                 │
│  │ キャンセル │  │   保存   │                 │
│  └──────────┘  └──────────┘                 │
│                                             │
└─────────────────────────────────────────────┘

【ステータス変更確認ダイアログ】
┌─────────────────────────────────────────────┐
│ ステータス変更                        [×]   │
├─────────────────────────────────────────────┤
│                                             │
│  user1@test.com を無効化しますか？          │
│                                             │
│  ┌──────────┐  ┌──────────┐                 │
│  │ キャンセル │  │   実行   │                 │
│  └──────────┘  └──────────┘                 │
│                                             │
└─────────────────────────────────────────────┘
```

### 画面仕様

| 項目 | 内容 |
|------|------|
| 一覧表示 | Email、表示名、ロール、ステータス、操作 |
| ロール編集 | チェックボックスで複数選択可 |
| ステータス変更 | 有効/無効の切り替え（確認ダイアログ） |
| ページネーション | 20件/ページ |

### 呼び出すAPI

| 操作 | API | 備考 |
|------|-----|------|
| 一覧取得 | `GET /api/users?page=1&limit=20` | ADMIN専用 |
| ロール更新 | `PATCH /api/users/:id/roles` | `{ roleIds: [1, 2] }` |
| ステータス更新 | `PATCH /api/users/:id/status` | `{ isActive: false }` |

---

## 7. ロール管理画面 `/admin/roles`（ADMIN専用）

### ワイヤーフレーム

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  [Header]                                                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ロール管理                                 [+ 新規作成]                    │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐  │
│  │ ロール名         │ 説明                      │ 操作                   │  │
│  ├───────────────────────────────────────────────────────────────────────┤  │
│  │ ADMIN            │ 管理者ロール              │ [編集]                 │  │
│  │ MEMBER           │ 一般メンバーロール        │ [編集]                 │  │
│  │ GUEST            │ ゲストロール              │ [編集] [削除]          │  │
│  │ ...              │                           │                        │  │
│  └───────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│  ※ ADMIN, MEMBER は削除不可（システムロール）                              │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘

【新規作成/編集ダイアログ】
┌─────────────────────────────────────────────┐
│ ロール作成                            [×]   │
├─────────────────────────────────────────────┤
│                                             │
│  ロール名 *                                 │
│  ┌───────────────────────────────────────┐  │
│  │                                       │  │
│  └───────────────────────────────────────┘  │
│                                             │
│  説明                                       │
│  ┌───────────────────────────────────────┐  │
│  │                                       │  │
│  └───────────────────────────────────────┘  │
│                                             │
│  ┌──────────┐  ┌──────────┐                 │
│  │ キャンセル │  │   保存   │                 │
│  └──────────┘  └──────────┘                 │
│                                             │
└─────────────────────────────────────────────┘
```

### 画面仕様

| 項目 | 内容 |
|------|------|
| 一覧表示 | ロール名、説明、操作 |
| 新規作成/編集 | ダイアログ |
| 削除 | ADMIN/MEMBER以外のみ削除可（確認ダイアログ） |

### 呼び出すAPI

| 操作 | API | 備考 |
|------|-----|------|
| 一覧取得 | `GET /api/roles` | ADMIN専用 |
| 作成 | `POST /api/roles` | `{ name, description }` |
| 更新 | `PATCH /api/roles/:id` | `{ name, description }` |
| 削除 | `DELETE /api/roles/:id` | システムロール削除不可 |

---

## Skills活用ガイド

### /frontend-design

各画面実装時に使用。以下のプロンプト例を参考：

```
/frontend-design を使用して、ログイン画面を実装してください。
- Angular 21 Standalone Component
- SCSSでスタイリング
- シンプルで見やすいUI
- 上記ワイヤーフレームに従う
```

### /theme-factory

全画面実装後、統一テーマを適用：

```
/theme-factory を使用して、シンプルなテーマを適用してください。
- プライマリカラー: 青系
- フォント: システムフォント
- 余白・サイズの統一
```

---

## 備考

- ダークモードは対応しない（シンプルさ優先）
- レスポンシブ対応は最小限（デスクトップ優先）
- アニメーションは控えめに
