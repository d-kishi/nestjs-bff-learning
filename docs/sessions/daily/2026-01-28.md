# 2026-01-28 セッション記録

## セッション概要

| 項目 | 内容 |
|------|------|
| 目的 | 前回作成した学習資料（Guards、TypeORMエンティティ）の読み解き・学習 |
| 作業特性 | 学習・理解確認 |

## 完了事項

- [x] Guards学習資料の確認・質疑応答
  - JwtAuthGuardのグローバル登録と`@Public()`による除外の仕組み
  - RolesGuardのデフォルト許可動作（`@Roles()`未指定時は許可）
  - GuardとDecoratorの連携（Guardが処理、Decoratorがメタデータ提供）
  - `SetMetadata`と`Reflector`の関係（Reflect Metadata API）
- [x] TypeORMマイグレーションについての質疑
  - `migration:generate`でエンティティとDBの差分からマイグレーションファイル自動生成可能
  - 本プロジェクトは学習目的のため`synchronize: true`を採用
- [x] 前回セッション(2026-01-26)の成果物をコミット

## 技術的知見・学び

### Guard適用方式の違い

| 方式 | 登録場所 | Controller側 |
|------|---------|--------------|
| グローバル | `app.module.ts`で`APP_GUARD` | 何も書かない（自動適用） |
| 個別適用 | なし | `@UseGuards()`を明示的に書く |

### GuardとDecoratorの役割分担

- **Guard**: 処理ロジックを持つ（`canActivate`メソッド）
- **Decorator**: メタデータを設定する（`SetMetadata`）
- Guardは`Reflector`経由でDecoratorが設定したメタデータを読み取る

### SetMetadataとReflectorの関係

- どちらも内部的には`Reflect Metadata API`を使用
- 命名に繋がりがないため直感的に分かりにくい（NestJSの設計上の特性）

## 発生した問題と解決

特になし

## 未完了・継続事項

- [ ] NestJS学習継続 - サービス間通信（BFFパターン）の学習資料作成
- [ ] 開発環境モダナイゼーション（Issue #2）
- [ ] 共通パッケージ実装（Issue #5）

## 次回への申し送り

- NestJS学習資料は8件完成済み
- 次の学習トピック候補: サービス間通信（BFFパターン）
- Guards/TypeORMエンティティの理解は完了

## 変更ファイル一覧

| ファイル | 変更内容 |
|---------|---------|
| `docs/sessions/daily/2026-01-28.md` | 新規作成（本セッション記録） |
