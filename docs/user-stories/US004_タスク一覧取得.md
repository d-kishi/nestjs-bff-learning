# US004: タスク一覧取得

## ストーリー

MEMBERユーザーとして、
タスクの一覧を条件で絞り込んで取得したい。
それにより、目的のタスクを素早く見つけられる。

## 受け入れ基準

- タスク一覧をページネーション付きで取得できる
- プロジェクトID、ステータス、優先度、担当者ID、タグIDでフィルタリングできる
- 各タスクにはタグ情報が含まれる
- デフォルトでは1ページあたり20件取得

## アンチパターン（これは仕様に含まない）

- 一覧取得時にコメント情報は含まない（詳細取得で対応）
- 複数条件はAND検索となる（OR検索はサポートしない）
- キーワード検索（タイトル・説明の全文検索）はサポートしない
- ソート順の指定はできない（作成日時の降順固定）

## テストシナリオ

### 正常系

#### シナリオ1: 全タスクを取得

- **Given（前提）**: タスクが5件登録されている
- **When（操作）**: GET /tasks を送信
- **Then（結果）**:
  - HTTPステータス 200 が返る
  - `data` に5件のタスクが含まれる
  - 各タスクに `tags` 配列が含まれる

#### シナリオ2: プロジェクトでフィルタリング

- **Given（前提）**: プロジェクト1に3件、プロジェクト2に2件のタスクがある
- **When（操作）**: GET /tasks?projectId=1 を送信
- **Then（結果）**:
  - `data` に3件のタスクが含まれる
  - すべてのタスクの `projectId` が 1

#### シナリオ3: ステータスでフィルタリング

- **Given（前提）**: TODO: 3件、IN_PROGRESS: 2件、DONE: 1件
- **When（操作）**: GET /tasks?status=IN_PROGRESS を送信
- **Then（結果）**:
  - `data` に2件のタスクが含まれる
  - すべてのタスクの `status` が `IN_PROGRESS`

#### シナリオ4: 複数条件でフィルタリング

- **Given（前提）**: 様々な条件のタスクが登録されている
- **When（操作）**: GET /tasks?projectId=1&status=TODO&priority=HIGH を送信
- **Then（結果）**:
  - 条件をすべて満たすタスクのみが返る

#### シナリオ5: タグでフィルタリング

- **Given（前提）**: タグ1が付いたタスクが2件、タグ2が付いたタスクが3件
- **When（操作）**: GET /tasks?tagId=1 を送信
- **Then（結果）**:
  - `data` に2件のタスクが含まれる
  - すべてのタスクの `tags` にタグ1が含まれる

#### シナリオ6: 条件に一致するタスクがない場合

- **Given（前提）**: ステータスがDONEのタスクがない
- **When（操作）**: GET /tasks?status=DONE を送信
- **Then（結果）**:
  - HTTPステータス 200 が返る
  - `data` は空配列 `[]`
  - `meta.total` が 0

### 異常系

#### シナリオ7: 無効なステータス値

- **Given（前提）**: -
- **When（操作）**: GET /tasks?status=INVALID を送信
- **Then（結果）**:
  - HTTPステータス 400 が返る
  - エラーコード `TASK_TASK_VALIDATION_ERROR`

## 関連

- US003: タスク作成
- US005: タスクステータス更新
